(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6808cde9"],{"1cff":function(t,e,s){},"335d":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"form-header"},[s("h1",{staticClass:"form-header-i"},[s("van-icon",{attrs:{name:t.icon,size:"24"},on:{click:t.toBack}})],1),s("div",{staticClass:"form-header-title"},[t._v(t._s(t.title))])])},i=[],o={props:{icon:{default:"play-circle",type:String},title:{default:"",type:String}},methods:{toBack:function(){this.$router.back(-1)}}},n=o,r=(s("537f"),s("2877")),c=Object(r["a"])(n,a,i,!1,null,"b81c8d9c",null);e["a"]=c.exports},"37c4":function(t,e,s){t.exports=s.p+"yl-assets-wap/img/wechat.476b7cd0.png"},"537f":function(t,e,s){"use strict";var a=s("f9c9"),i=s.n(a);i.a},b553:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"base-wrap pt-40"},[s("formHeader",{staticClass:"mb-40",attrs:{title:t.title}}),s("van-field",{staticClass:"mb-20",attrs:{label:"登录手机",placeholder:"请输入登录手机号",size:"large"},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}}),s("van-field",{staticClass:"mb-40",attrs:{label:"登录密码",placeholder:"请输入登录密码",size:"large",type:"password"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}},[s("router-link",{staticClass:"link-gray",attrs:{slot:"button",to:"password"},slot:"button"},[t._v("忘记密码")])],1),s("van-button",{staticClass:"login-btn mb-20",attrs:{block:"",type:"info"},on:{click:t.toRegist}},[t._v("注册用户")]),s("van-button",{staticClass:"login-btn mb-20",attrs:{block:"",type:"info"},on:{click:t.onLogin}},[t._v("立即登录")]),s("div",{staticClass:"trial-regist"},[s("div",[s("router-link",{attrs:{to:"register"}},[t._v("注册账户")])],1),s("div",{on:{click:t.toRegist}},[t._v("注册用户")]),s("div",{on:{click:t.onTrial}},[t._v("游客试玩")])]),s("div",{staticClass:"wechat-login"},[s("span",{staticClass:"font-13 color-grey"},[t._v("微信快速登录")]),s("div",{staticClass:"pt-20"},[s("van-image",{attrs:{src:t.wechat,height:"70",round:"",width:"70"},on:{click:t.wechatLogin}})],1)])],1)},i=[],o=(s("ac1f"),s("5319"),s("335d")),n=s("37c4"),r=s.n(n),c={data:function(){return{form:{},wechat:r.a}},components:{formHeader:o["a"]},computed:{title:function(){return"用户登录"}},created:function(){this.wechatAuth()},methods:{onLogin:function(){var t=this;this.$post("/auth/login",this.form).then((function(e){if(200!==e.code)return!1;t.$store.dispatch("setToken",e.data.access_token),t.$store.dispatch("getUserInfo"),t.$router.replace({name:"user"})}))},toRegist:function(){this.$router.push({path:"/auth/register"})},onTrial:function(){var t=this;this.$post("/auth/trial",this.form).then((function(e){if(200!==e.code)return!1;t.$store.dispatch("setToken",e.data.access_token),t.$store.dispatch("getUserInfo"),t.$router.replace({name:"user"})}))},wechatLogin:function(){var t=this.$cookie.get("__mh_ref_id__")?this.$cookie.get("__mh_ref_id__"):"",e=this.$store.state.config.auth_url;location.href="http://"+e+"/api/client/auth/wechat-login?ref_id="+t},wechatAuth:function(){var t=this,e=this.$route.query.token,s=this.$route.query.verification;null!=this.$store.state.user.info.id&&this.$router.push({path:"/user"}),void 0==s&&(location.href="http://www.baidu.com"),void 0!=e&&this.$get("/auth/get-token",{token:e}).then((function(e){if(200!==e.code)return!1;t.$store.dispatch("setToken",e.data.access_token),t.$store.dispatch("getUserInfo"),t.$router.replace({name:"user"})}))}}},l=c,u=(s("e3ae"),s("2877")),f=Object(u["a"])(l,a,i,!1,null,"7b989948",null);e["default"]=f.exports},e3ae:function(t,e,s){"use strict";var a=s("1cff"),i=s.n(a);i.a},f9c9:function(t,e,s){}}]);