(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a6bc1a68"],{"21ef":function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"header",class:e.fixed?"fixed":""},[s("van-icon",{attrs:{color:"white",name:"arrow-left",size:"22px"},on:{click:function(t){return e.toBack()}}}),e.title?s("h2",[e._v(e._s(e.title))]):e._e(),s("span",{staticClass:"slot"},[e._t("default")],2)],1)},r=[],a={props:{icon:{default:"play-circle",type:String},title:{default:"",type:String},close:{default:!1,type:Boolean},fixed:{default:!1,type:Boolean}},methods:{toBack:function(){this.close?this.$store.state.config.show_pop=!1:this.$router.back(-1)}}},n=a,i=(s("fb42"),s("2877")),f=Object(i["a"])(n,o,r,!1,null,"2f7e4949",null);t["a"]=f.exports},"3a60":function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.check_safe?s("div",[s("userHeader",{attrs:{title:"验证安全码"}}),s("van-password-input",{attrs:{focused:e.showKeyboard,value:e.safe_word,info:"安全密码为 6 位数字"}}),s("van-number-keyboard",{attrs:{show:e.showKeyboard},on:{delete:e.onDelete,input:e.onInput}})],1):s("div",{},[s("userHeader",{attrs:{title:"设置安全密码"}}),s("van-field",{staticClass:"mb-20 round",attrs:{border:!1,label:"安全密码",maxlength:"6",placeholder:"请输入新安全密码",size:"large",type:"password"},model:{value:e.form.safe_word,callback:function(t){e.$set(e.form,"safe_word",t)},expression:"form.safe_word"}}),s("van-button",{attrs:{disabled:""==e.form.safe_word,block:"",type:"warning"},on:{click:e.onConfirm}},[e._v("提交")])],1)},r=[],a=(s("fb6a"),s("21ef")),n={data:function(){return{check_safe:!1,safe_word:"",showKeyboard:!0,form:{mobile:this.$store.state.user.info.mobile,safe_word:"",ver_code:null,method:"safeWordUpdate"},ver_code:0}},components:{userHeader:a["a"]},created:function(){this.$store.state.user.info.safe_word&&(this.check_safe=!0)},methods:{onInput:function(e){var t=this;if(this.safe_word=(this.safe_word+e).slice(0,6),6===this.safe_word.length){var s={safe_word:this.safe_word};this.$post("user/safe-word/check",s).then((function(e){t.safe_word="",200===e.code&&(t.check_safe=!1)}))}},onDelete:function(){this.safe_word=this.safe_word.slice(0,this.safe_word.length-1)},getCode:function(){var e=this;this.form.mobile=this.$store.state.user.info.mobile,this.$post("/sms/safeWord",this.form).then((function(t){if(200===t.code){e.ver_code=60;setInterval((function(){e.ver_code--}),1e3)}}))},onConfirm:function(){var e=this;this.form.mobile=this.$store.state.user.info.mobile,this.form.ver_code=883488,this.isNumber(this.form.safe_word)?this.$post("/user/update",this.form).then((function(t){200===t.code&&(e.$store.state.user.info.safe_word=!0,e.check_safe=!0,e.form.ver_code="",e.form.safe_word="",e.$router.go(-1))})):this.$dialog.alert({message:"安全密码必须是数字,且大于6位"})},isNumber:function(e){var t=/^\d{6}$/;return!!t.test(e)}}},i=n,f=(s("7cd8"),s("2877")),c=Object(f["a"])(i,o,r,!1,null,"3357783d",null);t["default"]=c.exports},"7cd8":function(e,t,s){"use strict";var o=s("a7dd"),r=s.n(o);r.a},a7dd:function(e,t,s){},cffd:function(e,t,s){},fb42:function(e,t,s){"use strict";var o=s("cffd"),r=s.n(o);r.a}}]);