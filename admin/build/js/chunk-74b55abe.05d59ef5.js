(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-74b55abe"],{1148:function(t,e,a){"use strict";var n=a("a691"),s=a("1d80");t.exports="".repeat||function(t){var e=String(s(this)),a="",r=n(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(a+=e);return a}},"179a":function(t,e,a){},2438:function(t,e,a){"use strict";var n=a("179a"),s=a.n(n);s.a},"408a":function(t,e,a){var n=a("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"73cf":function(t,e,a){"use strict";var n=a("a3a2"),s=a.n(n);s.a},a3a2:function(t,e,a){},b680:function(t,e,a){"use strict";var n=a("23e7"),s=a("a691"),r=a("408a"),o=a("1148"),i=a("d039"),l=1..toFixed,c=Math.floor,u=function(t,e,a){return 0===e?a:e%2===1?u(t,e-1,a*t):u(t*t,e/2,a)},d=function(t){var e=0,a=t;while(a>=4096)e+=12,a/=4096;while(a>=2)e+=1,a/=2;return e},f=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i((function(){l.call({})}));n({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,a,n,i,l=r(this),f=s(t),m=[0,0,0,0,0,0],p="",h="0",v=function(t,e){var a=-1,n=e;while(++a<6)n+=t*m[a],m[a]=n%1e7,n=c(n/1e7)},b=function(t){var e=6,a=0;while(--e>=0)a+=m[e],m[e]=c(a/t),a=a%t*1e7},g=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==m[t]){var a=String(m[t]);e=""===e?a:e+o.call("0",7-a.length)+a}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(p="-",l=-l),l>1e-21)if(e=d(l*u(2,69,1))-69,a=e<0?l*u(2,-e,1):l/u(2,e,1),a*=4503599627370496,e=52-e,e>0){v(0,a),n=f;while(n>=7)v(1e7,0),n-=7;v(u(10,n,1),0),n=e-1;while(n>=23)b(1<<23),n-=23;b(1<<n),v(1,1),b(2),h=g()}else v(0,a),v(1<<-e,0),h=g()+o.call("0",f);return f>0?(i=h.length,h=p+(i<=f?"0."+o.call("0",f-i)+h:h.slice(0,i-f)+"."+h.slice(i-f))):h=p+h,h}})},be17:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("create-recharge",{ref:"create",staticClass:"mb-20"}),a("Card",{attrs:{"dis-hover":""}},[a("table-header-new",{attrs:{config:t.config,title:"充值记录"},on:{"update:config":function(e){t.config=e},"on-search":t.onSearch}},[a("Select",{attrs:{size:"small"},on:{"on-change":t.onSearch},model:{value:t.config.value.status,callback:function(e){t.$set(t.config.value,"status",e)},expression:"config.value.status"}},[a("Option",{attrs:{value:"0"}},[t._v("所有充值")]),a("Option",{attrs:{value:"1"}},[t._v("等待处理")]),a("Option",{attrs:{value:"2"}},[t._v("充值成功")]),a("Option",{attrs:{value:"3"}},[t._v("充值失败")])],1),a("Button",{staticClass:"ml-10",attrs:{size:"small",type:"primary"},on:{click:t.onReset}},[t._v("初始")]),a("Button",{staticClass:"ml-6",attrs:{size:"small",type:"primary"},on:{click:t.onSearch}},[a("span",{staticClass:"font-13"},[t._v("刷新")])])],1),a("table-data",{ref:"table",on:{"on-search":t.onSearch}})],1)],1)},s=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{attrs:{"dis-hover":""}},[a("table-header-new",{staticClass:"mb-14",attrs:{title:"用户充值"}}),a("lett-loading",{attrs:{visible:t.loading},on:{click:function(e){t.loading=!1}}}),a("div",{staticClass:"display-flex mb-14"},[a("Input",{staticClass:"pr-10",attrs:{placeholder:"请输入用户ID"},on:{"on-blur":t.checkUser},model:{value:t.form.user_id,callback:function(e){t.$set(t.form,"user_id",e)},expression:"form.user_id"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("用户ID")])]),a("Input",{attrs:{disabled:""},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("用户昵称")])])],1),a("div",{staticClass:"display-flex mb-10"},[a("Input",{staticClass:"flex-1",attrs:{placeholder:"请输入充值金额"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("充值金额")])]),a("div",{staticClass:"tool-amount mr-10"},t._l(t.tool,(function(e){return a("Button",{key:e.value,on:{click:function(a){return t.setAmount(e.value)}}},[t._v(t._s(e.label))])})),1),a("Button",{attrs:{type:"primary"},on:{click:t.onConfirm}},[t._v("确认充值")])],1)],1)},o=[],i=(a("acd8"),{data:function(){return{loading:!1,amount:null,form:{nickname:"",user_id:"",amount:""},tool:[{value:1e3,label:"1K"},{value:2e3,label:"2K"},{value:5e3,label:"5K"},{value:1e4,label:"10K"},{value:2e4,label:"20K"},{value:5e4,label:"50K"}]}},methods:{onConfirm:function(){var t=this;if(this.form.amount=this.amount,!this.form.user_id)return this.$Message.warning("请输入充值用户ID");if(!this.form.nickname)return this.$Message.warning("请校验对方昵称");if(!this.form.amount)return this.$Message.warning("请输入转账金额");var e="您确定要给<"+this.form.nickname+">转账 "+this.form.amount+" 元吗？";if(!0!==confirm(e))return!1;this.loading=!0,this.$post("recharge/create",this.form).then((function(e){if(200!==e.code)return t.loading=!1;t.form.amount=null,t.amount=null,t.form.user_id="",t.form.nickname="",t.$parent.$refs.table.getIndex(),t.loading=e.message}))},setAmount:function(t){var e=t;""!=this.amount&&null!==this.amount&&(e=parseFloat(this.amount)+t),this.amount=e},checkUser:function(){var t=this;if(!this.form.user_id)return this.form.nickname=null;this.$post("recharge/check-user",this.form).then((function(e){if(200!==e.code)return!1;t.form.nickname=e.data.nickname}))}}}),l=i,c=(a("73cf"),a("2877")),u=Object(c["a"])(l,r,o,!1,null,"24dfd3df",null),d=u.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relative"},[a("lett-loading",{attrs:{visible:t.loading},on:{click:t.getIndex}}),a("Table",{attrs:{columns:t.columns,data:t.items,height:t._f("table_height")(510),border:""},scopedSlots:t._u([{key:"nickname",fn:function(t){var e=t.row;return a("table-user",{attrs:{data:e.user}})}},{key:"balance",fn:function(e){var a=e.row;return[t._v(t._s(a.wallet.balance))]}},{key:"user_id",fn:function(e){var n=e.row;return a("div",{staticClass:"table-pointer",on:{click:function(e){return t.setCreate(n)}}},[t._v(t._s(n.user_id))])}},{key:"channel",fn:function(e){var a=e.row;return[t._v(t._s(a.channel_info.bank_name))]}},{key:"status",fn:function(e){var n=e.row;return a("div",{class:t.$store.state.config.bank_status[n.status.toString()].class,domProps:{innerHTML:t._s(t.$store.state.config.bank_status[n.status.toString()].name)}})}},{key:"action",fn:function(e){var n=e.row;e.index;return a("div",{},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.updateData(!0,n)}}},[t._v("操作")])],1)}},{key:"type",fn:function(e){var a=e.row;return[t._v(t._s(t.$store.state.config.type[a.channel]))]}},{key:"created_at",fn:function(t){var e=t.row;return a("table-date",{staticClass:"color-black",attrs:{date:e.created_at}})}}])}),a("lett-page",{attrs:{page:t.page},on:{"on-change":t.onPage}}),a("modal-update",{attrs:{config:t.dataware.update},on:{"update:config":function(e){return t.$set(t.dataware,"update",e)},success:t.updateData}})],1)},m=[],p=(a("0d03"),a("d3b7"),a("25f0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Drawer",{attrs:{"footer-hide":!0,title:"充值详情",width:"520"},on:{"on-visible-change":t.getData},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("lett-loading",{attrs:{visible:t.loading}}),t.form.id?a("Form",{staticClass:"pt-20",attrs:{"label-width":70,"label-position":"right"}},[a("div",{staticClass:"alert-frame-base mb-20"},[t._v(" 您正在对 "),a("b",{staticClass:"color-red"},[t._v(t._s(t.form.user.nickname)+" / "+t._s(t.form.user.real_name))]),t._v(" 进行充值，请谨慎操作 "),a("br"),t._v("当前用户余额： "),a("b",{staticClass:"color-red"},[t._v(t._s(t.form.wallet.balance))]),a("br"),t._v("审核通过后，系统将自动给用户增加充值金额。 ")]),"usdt"==t.form.channel?a("FormItem",{attrs:{label:"充值金额"}},[a("div",{staticClass:"display-flex"},[a("Input",{staticClass:"pr-20",model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("人民币")])]),a("Input",{model:{value:t.usdt_amount,callback:function(e){t.usdt_amount=e},expression:"usdt_amount"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v("USDT")])])],1)]):a("FormItem",{attrs:{label:"充值金额"}},[a("Input",{model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1),a("FormItem",{attrs:{label:"充值方式"}},[a("Input",{attrs:{disabled:""},model:{value:t.$store.state.config.type[t.form.channel],callback:function(e){t.$set(t.$store.state.config.type,t.form.channel,e)},expression:"$store.state.config.type[form.channel]"}})],1),t.form.extend?["usdt"==t.form.channel?a("FormItem",{attrs:{label:"充币地址"}},[a("Input",{attrs:{disabled:""},model:{value:t.form.extend.usdt_address,callback:function(e){t.$set(t.form.extend,"usdt_address",e)},expression:"form.extend.usdt_address"}}),a("Icon",{staticClass:"pl-10 copy-finger",attrs:{type:"md-albums"},on:{click:function(e){return t.copy(t.form.extend.usdt_address)}}})],1):a("FormItem",{attrs:{label:"备注码"}},[a("Input",{attrs:{disabled:""},model:{value:t.form.extend.code,callback:function(e){t.$set(t.form.extend,"code",e)},expression:"form.extend.code"}}),a("Icon",{staticClass:"pl-10 copy-finger",attrs:{type:"md-albums"},on:{click:function(e){return t.copy(t.form.extend.code)}}})],1)]:t._e(),a("FormItem",{attrs:{label:"审核状态"}},[a("Select",{attrs:{disabled:1!=t.status},on:{"on-change":t.setRemark},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}},t._l(this.$store.state.config.bank_status,(function(e,n){return a("Option",{key:n,attrs:{value:n}},[t._v(t._s(e.name))])})),1)],1),a("Divider"),1==t.status?[a("FormItem",{attrs:{label:"操作备注"}},[a("Input",{attrs:{rows:4,placeholder:"请输入操作备注",type:"textarea"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1),a("Button",{staticClass:"mb-20",attrs:{long:"",type:"primary"},on:{click:t.confirm}},[t._v("确认审核")])]:[a("div",{staticClass:"alert-frame-base mb-20"},[t._v(" 该充值订单已 "),a("span",{staticClass:"color-red"},[t._v(t._s(this.$store.state.config.bank_status[t.status].name))]),t._v("，如需撤销操作，请谨慎操作。 "),a("br"),t._v("如超过1小时未撤销，将无法再撤销。 ")]),a("FormItem",{attrs:{label:"撤销备注"}},[a("Input",{attrs:{rows:4,placeholder:"请输入撤销备注",type:"textarea"},model:{value:t.form.cancel,callback:function(e){t.$set(t.form,"cancel",e)},expression:"form.cancel"}})],1),a("Button",{staticClass:"mb-20",attrs:{long:"",type:"primary"},on:{click:t.cancel}},[t._v("确认撤销")])]],2):t._e()],1)}),h=[],v=(a("b680"),{props:{config:{}},data:function(){return{loading:!1,form:{},remark_default:{1:"",2:"您的充值申请已审核通过，请注意查收",3:"未查询您的相关充值款项，如已转账请联系在线客服"},cancel_default:"人工操作失误，撤销申请重新审核",status:null,cancel_temp:"",remark_temp:""}},computed:{visible:{get:function(){return this.config.visible},set:function(){this.config.visible=!1,this.config.data={}}},disabled:function(){return"1"!=this.config.data.status},usdt_amount:function(){if("usdt"==this.form.channel&&""!=this.form.amount){var t=this.form.amount/this.$store.state.config.usdt_rate;return console.log(t),t.toFixed(2)}return null}},methods:{confirm:function(){var t=this;this.$post(this.config.api,this.form).then((function(e){e.data.status=e.data.status.toString(),t.form=e.data,t.status=e.data.status,t.$emit("success",!0,e.data,!0)}))},cancel:function(){var t=this;this.$post("/recharge/cancel",this.form).then((function(e){e.data.status=e.data.status.toString(),t.form=e.data,t.status=e.data.status,t.$emit("success",!0,e.data,!0)}))},getData:function(){var t=this;if(!0!==this.visible)return this.form={},this.status=null,!0;var e={id:this.config.data.id};this.$get("recharge/get",e).then((function(e){if(200!==e.code)return!1;e.data.status=e.data.status.toString(),t.form=e.data,t.status=e.data.status,"1"!=e.data.status&&(t.form.cancel=t.cancel_default)}))},setRemark:function(t){this.form.remark=this.remark_default[t]},setCancelRemark:function(t){console.log(t),this.form.cancel=t},copy:function(t){var e=document.createElement("input");e.setAttribute("id","cp_hgz_input"),e.value=t,document.getElementsByTagName("body")[0].appendChild(e),document.getElementById("cp_hgz_input").select(),document.execCommand("copy"),document.getElementById("cp_hgz_input").remove(),this.$Message.success("复制成功")}}}),b=v,g=(a("2438"),Object(c["a"])(b,p,h,!1,null,"32e089b2",null)),_=g.exports,k=a("adf6"),x={mixins:[k["a"]],components:{modalUpdate:_},data:function(){return{dataware:{index:{api:"/recharge/index"},update:{api:"/recharge/update",visible:!1,data:{},fields:["status","updated_at"]}},columns:[{title:"流水ID",maxWidth:120,key:"id"},{title:"昵称",slot:"nickname",width:200},{title:"用户ID",slot:"user_id",align:"center",width:200},{title:"充值金额",key:"amount",align:"right",width:140},{title:"提现类型",align:"right",slot:"type",width:200},{title:"状态",slot:"status",align:"center"},{title:"操作",slot:"action",width:100,align:"center"},{title:"时间",slot:"created_at",align:"center"}]}},methods:{setCreate:function(t){this.$parent.$parent.$refs.create.form.user_id=t.user_id,this.$parent.$parent.$refs.create.form.nickname=t.user.nickname},cancelRecharge:function(t){var e=this,a="您确定要撤回该笔充值吗？";if(!0!==confirm(a))return!1;this.$post("/recharge/cancel",t).then((function(t){t.data.status=t.data.status.toString(),e.form=t.data,e.status=t.data.status,e.getIndex()}))}}},y=x,$=Object(c["a"])(y,f,m,!1,null,null,null),w=$.exports,I=a("c86f"),C={mixins:[I["a"]],name:"balanceRecharge",components:{tableData:w,createRecharge:d},data:function(){return{loading:!1,config:{value:{status:"0"},select:{field:"user_id",value:""},fields:[{value:"user_id",label:"用户ID",default:!0},{value:"id",label:"充值ID"},{value:"amount",label:"充值金额"}]}}}},F=C,S=Object(c["a"])(F,n,s,!1,null,null,null);e["default"]=S.exports}}]);