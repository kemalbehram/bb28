(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b9db2"],{3571:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{attrs:{"dis-hover":""}},[a("table-header-new",{attrs:{title:"焦点图设置"}},[a("Button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.$refs.table.createData(!0)}}},[t._v("添加焦点图")])],1),a("table-data",{ref:"table",on:{"on-search":t.onSearch}})],1)},i=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relative mb-10"},[a("lett-loading",{attrs:{visible:t.loading}}),a("Table",{attrs:{columns:t.columns,data:t.items,border:""},scopedSlots:t._u([{key:"mapping",fn:function(e){var a=e.row;e.index;return[t._v(t._s(t.mapKeyTrans(a.mapping)))]}},{key:"param",fn:function(e){var n=e.row;e.index;return t._l(n.params,(function(e,n){return a("Tag",{key:n},[t._v(t._s(n)+": "+t._s(e))])}))}},{key:"scope",fn:function(e){var n=e.row;return t._l(n.scope,(function(e,n){return a("Tag",{key:n},[t._v(t._s(t.scope[e]))])}))}},{key:"action",fn:function(e){var n=e.row;e.index;return[a("Button",{staticClass:"mr-6",attrs:{size:"small",type:"primary"},on:{click:function(e){return t.updateData(!0,n)}}},[t._v("修改")]),a("Button",{attrs:{size:"small",type:"error"},on:{click:function(e){return t.deleteData(n)}}},[t._v("删除")])]}}])}),a("modal-create",{attrs:{config:t.dataware.create,action:"create"},on:{"update:config":function(e){return t.$set(t.dataware,"create",e)},success:t.createData}}),a("modal-update",{attrs:{config:t.dataware.update,action:"update"},on:{"update:config":function(e){return t.$set(t.dataware,"update",e)},success:t.updateData}})],1)},s=[],r=(a("b0c0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Drawer",{attrs:{"footer-hide":!0,title:"创建焦点图",width:"720"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("lett-loading",{attrs:{visible:t.loading}}),a("Form",{staticClass:"pt-10 pb-10",attrs:{"label-width":70,"label-position":"right"}},[a("FormItem",{attrs:{label:"显示位置"}},[a("Select",{attrs:{"max-tag-count":2,multiple:""},model:{value:t.form.scope,callback:function(e){t.$set(t.form,"scope",e)},expression:"form.scope"}},t._l(this.$store.state.config.focus_scope,(function(e,n){return a("Option",{key:n,attrs:{value:n}},[t._v(t._s(e))])})),1)],1),a("FormItem",{attrs:{label:"焦点图"}},[a("image-upload",{attrs:{action:t.uploadAction,height:200,id:t.action,width:538},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}})],1),a("FormItem",{attrs:{label:"链接页面"}},[a("Select",{model:{value:t.form.mapping,callback:function(e){t.$set(t.form,"mapping",e)},expression:"form.mapping"}},t._l(this.$store.state.config.focus_mapping,(function(e,n){return a("Option",{key:n,attrs:{value:e.mapping}},[t._v(t._s(e.name))])})),1)],1),t._l(t.field,(function(e){return a("FormItem",{key:e.value,attrs:{label:e.name}},[a("div",{staticClass:"hidden"},[t._v(t._s(e.defalut&&(t.form.params[e.value]=e.defalut)))]),a("Input",{attrs:{disabled:e.disabled,placeholder:e.placeholder},model:{value:t.form.params[e.value],callback:function(a){t.$set(t.form.params,e.value,a)},expression:"form.params[item.value]"}})],1)})),a("Button",{staticClass:"mt-20",attrs:{long:"",type:"primary"},on:{click:t.confirm}},[t._v("确认创建")])],2)],1)}),c=[],l={props:{config:{},action:""},data:function(){return{loading:!1,uploadAction:"image/create",default:{mapping:"",params:{},image:""},field:[]}},computed:{visible:{get:function(){return this.config.visible},set:function(){this.config.visible=!1,this.config.data={}}},form:{get:function(){return"create"==this.action?this["default"]:"update"==this.action?this.config.data:void 0},set:function(){}}},watch:{"form.mapping":function(t){this.field=t?this.$store.state.config.focus_mapping[t].params:[]}},methods:{confirm:function(){var t=this;this.$post(this.config.api,this.form).then((function(e){t.$emit("success",!1,e.data,!0)}))}}},u=l,p=a("2877"),m=Object(p["a"])(u,r,c,!1,null,null,null),d=m.exports,f=a("adf6"),g={mixins:[f["a"]],components:{modalUpdate:d,modalCreate:d},data:function(){return{dataware:{index:{api:"/option/focus/index"},create:{api:"/option/focus/create",visible:!1},update:{api:"/option/focus/update",visible:!1,data:{},fields:["image","mapping","params","scope","updated_at"]},delete:{api:"/option/focus/delete"}},columns:[{title:"ID",key:"id",width:80},{title:"链接",slot:"mapping",maxWidth:140},{title:"参数",slot:"param",maxWidth:240},{title:"展示位置",slot:"scope"},{title:"创建",key:"created_at",maxWidth:200},{title:"操作",slot:"action",width:160,align:"center"}]}},computed:{scope:function(){return this.$store.state.config.focus_scope}},methods:{mapKeyTrans:function(t){return this.$store.state.config.focus_mapping[t].name}}},v=g,h=Object(p["a"])(v,o,s,!1,null,null,null),b=h.exports,_=a("c86f"),k={mixins:[_["a"]],name:"OptionFocus",components:{tableData:b}},w=k,y=Object(p["a"])(w,n,i,!1,null,null,null);e["default"]=y.exports}}]);