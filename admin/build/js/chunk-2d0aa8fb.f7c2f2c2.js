(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0aa8fb"],{1215:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Card",{attrs:{"dis-hover":""}},[a("table-header-new",{attrs:{config:t.config,title:"所有公告"},on:{"update:config":function(e){t.config=e},"on-search":t.onSearch}},[a("Select",{staticClass:"mr-10",attrs:{size:"small"},on:{"on-change":t.onSearch},model:{value:t.config.value.type,callback:function(e){t.$set(t.config.value,"type",e)},expression:"config.value.type"}},[a("Option",{attrs:{value:"all"}},[t._v("所有公告")]),a("Option",{attrs:{value:"index"}},[t._v("首页弹框")]),a("Option",{attrs:{value:"scroll"}},[t._v("首页滚动")]),a("Option",{attrs:{value:"list"}},[t._v("列表")]),a("Option",{attrs:{value:"game"}},[t._v("游戏")])],1),a("Button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.$refs.table.createData(!0)}}},[t._v("添加公告")])],1),a("table-data",{ref:"table",on:{"on-search":t.onSearch}})],1)},n=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"relative"},[a("lett-loading",{attrs:{visible:t.loading},on:{click:t.getIndex}}),a("Table",{attrs:{columns:t.columns,data:t.items,height:t._f("table_height")(300),border:""},scopedSlots:t._u([{key:"updatedTime",fn:function(t){var e=t.row;return a("Tooltip",{attrs:{content:e.updated_at,placement:"top"}},[a("Time",{attrs:{interval:1,time:e.updated_at}})],1)}},{key:"status",fn:function(e){var i=e.row;return[1==i.status?a("Tag",[t._v("正常")]):t._e(),0==i.status?a("Tag",{attrs:{color:"error"}},[t._v("隐藏")]):t._e()]}},{key:"action",fn:function(e){var i=e.row;e.index;return[a("Button",{staticClass:"mr-6",attrs:{size:"small",type:"primary"},on:{click:function(e){return t.updateData(!0,i)}}},[t._v("编辑")]),a("Button",{attrs:{size:"small",type:"error"},on:{click:function(e){return t.deleteData(i)}}},[t._v("删除")])]}}])}),a("lett-page",{attrs:{page:t.page},on:{"on-change":t.getIndex}}),a("modal-create",{attrs:{config:t.dataware.create,action:"create",title:"创建公告"},on:{"update:config":function(e){return t.$set(t.dataware,"create",e)},success:t.createData}}),a("modal-update",{attrs:{config:t.dataware.update,action:"update",title:"修改公告"},on:{"update:config":function(e){return t.$set(t.dataware,"update",e)},success:t.updateData}})],1)},o=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Drawer",{attrs:{"footer-hide":!0,title:t.title,width:"820"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("lett-loading",{attrs:{visible:t.loading}}),a("Form",{attrs:{"label-width":76,"label-position":"right"}},[a("FormItem",{staticClass:"mt-6",attrs:{label:"公告标题"}},[a("Input",{attrs:{placeholder:"请输入标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("FormItem",{attrs:{label:"公告状态"}},[a("i-switch",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}}),a("span",{staticClass:"form-desc-middle"},[t._v("关闭后 网页中将不显示该公告")])],1),a("FormItem",{attrs:{label:"公告类型"}},[a("Select",{staticStyle:{width:"100px"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.types,(function(e,i){return a("Option",{key:i,attrs:{value:e.value}},[t._v(t._s(e.label))])})),1)],1),t.visible?a("FormItem",{attrs:{label:"公告内容"}},[a("tinymce-editor",{ref:"editor",attrs:{element:"notice-editor",plugins:"table code"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1):t._e(),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("保存公告")])],1)],1)],1)},s=[],c=a("4e53"),u={components:{TinymceEditor:c["a"]},props:{config:{},action:"",title:""},data:function(){return{loading:!1,default:{status:!0},types:[{value:"index",label:"首页弹出"},{value:"scroll",label:"首页滚动"},{value:"list",label:"列表"},{value:"game",label:"游戏"}]}},computed:{visible:{get:function(){return this.config.visible},set:function(){this.config.visible=!1,this.config.data={}}},form:{get:function(){return"create"==this.action?this["default"]:"update"==this.action?this.config.data:void 0},set:function(){}}},methods:{confirm:function(){var t=this,e=this.config.api;this.$post(e,this.form).then((function(e){t.form={};var a="update"==t.action;t.$emit("success",!1,e.data,a)}))}}},d=u,f=a("2877"),m=Object(f["a"])(d,r,s,!1,null,null,null),p=m.exports,v=a("adf6"),h={mixins:[v["a"]],components:{modalUpdate:p,modalCreate:p},data:function(){return{dataware:{index:{api:"/article/1001/index"},create:{api:"/article/1001/create",visible:!1},update:{api:"/article/1001/update",visible:!1,data:{name:""},fields:["title","status","category","content","excerpt","thumb","cat_id","updated_at"]},delete:{api:"/article/1001/delete"}},columns:[{title:"ID",width:100,key:"id"},{title:"标题",key:"title",minWidth:200},{title:"类型",key:"type_name",minWidth:200},{title:"状态",key:"status",maxWidth:160,slot:"status",align:"center"},{title:"最后修改",key:"updated_at",maxWidth:200,slot:"updatedTime"},{title:"创建于",key:"created_at",maxWidth:200},{title:"操作",slot:"action",width:160,align:"center"}]}},created:function(){this.getIndex(1)}},b=h,g=Object(f["a"])(b,l,o,!1,null,null,null),_=g.exports,y=a("c86f"),k={mixins:[y["a"]],name:"articleNews",components:{tableData:_},data:function(){return{config:{value:{page:"1",type:"all"},fields:[{value:"title",label:"文章标题",default:!0}]}}}},x=k,w=Object(f["a"])(x,i,n,!1,null,null,null);e["default"]=w.exports}}]);